<!--
 ~ This program is free software; you can redistribute it and/or modify it under the
 ~ terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
 ~ Foundation.
 ~
 ~ You should have received a copy of the GNU Lesser General Public License along with this
 ~ program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
 ~ or from the Free Software Foundation, Inc.,
 ~ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 ~
 ~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 ~ See the GNU Lesser General Public License for more details.
 ~
 ~ Copyright 2014 Pentaho Corporation. All rights reserved.
 -->

<features xmlns="http://karaf.apache.org/xmlns/features/v1.0.0">

  <!--This feature never works reliably due to the asynchronous loading of blueprint files-->
  <!--Putting the feature back so these dependencies will be in the local maven repo in /system-->
  <feature name="pentaho-deployers" version="1.0">
    <bundle>mvn:commons-logging/commons-logging/1.1.3</bundle>
    <bundle>mvn:com.googlecode.json-simple/json-simple/1.1.1</bundle>
    <bundle>mvn:com.google.guava/guava/16.0.1</bundle>
    <bundle>mvn:commons-io/commons-io/2.4</bundle>
    <bundle>mvn:commons-lang/commons-lang/2.6</bundle>
    <bundle>mvn:log4j/log4j/1.2.17</bundle>
    <bundle>mvn:pentaho/pentaho-platform-plugin-deployer/${project.version}</bundle>
    <bundle>mvn:pentaho/pentaho-webjars-deployer/${project.version}</bundle>
  </feature>

  <feature name="pentaho-base" version="1.0">
    <feature>pentaho-deployers</feature>
    <bundle>mvn:org.slf4j/osgi-over-slf4j/1.7.7</bundle>
    <bundle>mvn:log4j/log4j/1.2.17</bundle>
    <bundle>mvn:commons-logging/commons-logging/1.1.3</bundle>
    <bundle>mvn:org.apache.felix/org.apache.felix.http.api/2.3.2</bundle>
  </feature>

<feature name="pentaho-client" version="1.0">
    <feature>pentaho-base</feature>
    <bundle>mvn:pentaho/pentaho-osgi-utils-impl/${project.version}</bundle>
    <bundle>mvn:pentaho/pentaho-mongo-utils/${project.version}</bundle>
    <bundle>wrap:mvn:pentaho/pentaho-mongodb-plugin/${project.version}</bundle>
    <bundle>mvn:org.mongodb/mongo-java-driver/2.11.1</bundle>
    <bundle>mvn:pentaho/pdi-osgi-bridge-activator/${project.version}</bundle>
    <bundle>mvn:pentaho/pentaho-cache-manager-api/${project.version}</bundle>
    <bundle>mvn:pentaho/guava-cache-provider/${project.version}</bundle>
    <bundle>mvn:pentaho/pdi-dataservice-plugin/${project.version}</bundle>
  </feature>


  <!-- Overriding standard one to exclude log bundle which will not work without pax-logging -->
  <feature name="pentaho-jms">
    <configfile finalname="/etc/pentaho.jms.cfg">mvn:pentaho/pentaho-osgi-config/${project.version}/cfg/pentaho-jms
    </configfile>
    <feature>jms</feature>
    <feature>activemq</feature>
    <bundle start-level="90">blueprint:mvn:pentaho/pentaho-blueprint-activators/${project.version}/xml/jms
    </bundle>
  </feature>

  <feature name="pentaho-camel-jms" version="1.0">
    <feature>camel-jms</feature>
    <feature>activemq-camel</feature>
    <feature>pentaho-jms</feature>
    <bundle start-level="90">blueprint:mvn:pentaho/pentaho-blueprint-activators/${project.version}/xml/camel-jms
    </bundle>
  </feature>
  
    <!-- Spring 2 support -->
    <feature name="spring" description="Spring 2.x support" version="2.5.6.SEC03" resolver="(obr)">
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_6</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-core/2.5.6.SEC03</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-beans/2.5.6.SEC03</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-aop/2.5.6.SEC03</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-context/2.5.6.SEC03</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-context-support/2.5.6.SEC03</bundle>
    </feature>

    <feature name="spring-web" description="Spring 2.x Web support" version="2.5.6.SEC03" resolver="(obr)">
    	<feature version="2.5.6.SEC03">spring</feature>
    	<feature version="[2,3)">http</feature>
    	<bundle start-level="30">mvn:org.springframework/spring-web/2.5.6.SEC03</bundle>
		<bundle start-level="30">
mvn:org.springframework/spring-webmvc/2.5.6.SEC03</bundle>
    </feature>

    <!-- Spring DM support -->

    <feature name="spring-dm" description="Spring DM support" version="1.2.1" resolver="(obr)">
        <feature version="[2.5.6,4)">spring</feature>
    <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.cglib/2.2.2_1</bundle>
        <bundle start-level="30">mvn:org.springframework.osgi/spring-osgi-io/1.2.1</bundle>
        <bundle start-level="30">mvn:org.springframework.osgi/spring-osgi-core/1.2.1</bundle>
        <bundle start-level="30">mvn:org.springframework.osgi/spring-osgi-extender/1.2.1</bundle>
        <bundle start-level="30">mvn:org.springframework.osgi/spring-osgi-annotation/1.2.1</bundle>
        <bundle start-level="30">mvn:org.apache.karaf.deployer/org.apache.karaf.deployer.spring/2.3.5</bundle>
    </feature>

    <feature name="spring-dm-web" description="Spring DM Web Support" version="1.2.1" resolver="(obr)">
        <feature version="1.2.1">spring-dm</feature>
        <feature version="[2.5.6,4)">spring-web</feature>
        <feature version="[2,3)">http</feature>
        <bundle start-level="30">mvn:org.springframework.osgi/spring-osgi-web/1.2.1</bundle>
    </feature>

    <!-- Spring 3.0 support -->

    <feature name="spring" description="Spring 3.0.x support" version="3.0.7.RELEASE" resolver="(obr)">
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_6</bundle>
    <bundle start-level="30">mvn:org.springframework/spring-core/3.0.7.RELEASE</bundle>
    <bundle start-level="30">mvn:org.springframework/spring-asm/3.0.7.RELEASE</bundle>
    <bundle start-level="30">mvn:org.springframework/spring-expression/3.0.7.RELEASE</bundle>
    <bundle start-level="30">mvn:org.springframework/spring-beans/3.0.7.RELEASE</bundle>
    <bundle start-level="30">mvn:org.springframework/spring-aop/3.0.7.RELEASE</bundle>
    <bundle start-level="30">mvn:org.springframework/spring-context/3.0.7.RELEASE</bundle>
    <bundle start-level="30">mvn:org.springframework/spring-context-support/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-aspects" description="Spring 3.0.x AOP support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-aspects/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-instrument" description="Spring 3.0.x Instrument support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-instrument/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-jdbc" description="Spring 3.0.x JDBC support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring-tx</feature>
        <bundle start-level="30">mvn:org.springframework/spring-jdbc/3.0.7.RELEASE</bundle>
  </feature>

  <feature name="spring-jms" description="Spring 3.0.x JMS support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring-web</feature>
        <bundle start-level="10">mvn:org.apache.geronimo.specs/geronimo-jta_1.1_spec/1.1.1</bundle>
        <bundle start-level="10">mvn:org.apache.geronimo.specs/geronimo-jms_1.1_spec/1.1.1</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-jms/3.0.7.RELEASE</bundle>
        <bundle start-level="30">
mvn:org.springframework/spring-tx/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-struts" description="Spring 3.0.x Struts support" version="3.0.7.RELEASE" resolver="(obr)">    <feature version="3.0.7.RELEASE">spring-web</feature>
    <feature>war</feature>
        <bundle dependency="true" start-level="30">mvn:commons-collections/commons-collections/3.2.1</bundle>
        <bundle dependency="true" start-level="30">mvn:commons-beanutils/commons-beanutils/1.9.1</bundle>
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.struts/1.3.10_1</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-struts/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-test" description="Spring 3.0.x Test support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-test/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-orm" description="Spring 3.0.x ORM support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring-jdbc</feature>
        <bundle start-level="30">mvn:org.springframework/spring-orm/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-oxm" description="Spring 3.0.x OXM support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-oxm/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-tx" description="Spring 3.0.x Transaction (TX) support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-tx/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-web" description="Spring 3.0.x Web support" version="3.0.7.RELEASE" resolver="(obr)">
    	<feature version="3.0.7.RELEASE">spring</feature>
    	<feature version="[2,3)">http</feature>
    	<bundle start-level="30">mvn:org.springframework/spring-web/3.0.7.RELEASE</bundle>
		<bundle start-level="30">mvn:org.springframework/spring-webmvc/3.0.7.RELEASE</bundle>
    </feature>

    <feature name="spring-web-portlet" description="Spring 3.0.x Web Portlet support" version="3.0.7.RELEASE" resolver="(obr)">
        <feature version="3.0.7.RELEASE">spring-web</feature>
        <bundle dependency="true" start-level="30">mvn:javax.portlet/portlet-api/2.0</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-webmvc-portlet/3.0.7.RELEASE</bundle>
    </feature>

    <!-- Spring 3.1 support -->

    <feature name="spring" description="Spring 3.1.x support" version="3.1.4.RELEASE" resolver="(obr)">
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_6</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-core/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-asm/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-expression/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-beans/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-aop/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-context/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-context-support/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-aspects" description="Spring 3.1.x AOP support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-aspects/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-instrument" description="Spring 3.1.x Instrument support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-instrument/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-jdbc" description="Spring 3.1.x JDBC support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring-tx</feature>
        <bundle start-level="30">mvn:org.springframework/spring-jdbc/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-jms" description="Spring 3.1.x JMS support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring</feature>
        <bundle start-level="10">mvn:org.apache.geronimo.specs/geronimo-jta_1.1_spec/1.1.1</bundle>
        <bundle start-level="10">mvn:org.apache.geronimo.specs/geronimo-jms_1.1_spec/1.1.1</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-jms/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-tx/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-struts" description="Spring 3.1.x Struts support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring-web</feature>
    <feature>war</feature>
        <bundle dependency="true" start-level="30">mvn:commons-collections/commons-collections/3.2.1</bundle>
        <bundle dependency="true" start-level="30">mvn:commons-beanutils/commons-beanutils/1.9.1</bundle>
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.struts/1.3.10_1</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-struts/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-test" description="Spring 3.1.x Test support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-test/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-orm" description="Spring 3.1.x ORM support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring-jdbc</feature>
        <bundle start-level="30">mvn:org.springframework/spring-orm/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-oxm" description="Spring 3.1.x OXM support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-oxm/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-tx" description="Spring 3.1.x Transaction (TX) support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/spring-tx/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-web" description="Spring 3.1.x Web support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring</feature>
        <feature version="[2,3)">http</feature>
        <bundle start-level="30">mvn:org.springframework/spring-web/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-webmvc/3.1.4.RELEASE</bundle>
    </feature>

    <feature name="spring-web-portlet" description="Spring 3.1.x Web Portlet support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature version="3.1.4.RELEASE">spring-web</feature>
        <bundle dependency="true" start-level="30">mvn:javax.portlet/portlet-api/2.0</bundle>
        <bundle start-level="30">mvn:org.springframework/spring-webmvc-portlet/3.1.4.RELEASE</bundle>
    </feature>

    <!-- Spring 3.2 support -->

    <feature name="spring" description="Spring 3.2.x support" version="3.2.4.RELEASE" resolver="(obr)">
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_6</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.core/3.2.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.expression/3.2.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.beans/3.2.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.aop/3.2.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.context/3.2.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.context.support/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-aspects" description="Spring 3.2.x AOP support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/org.springframework.aspects/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-instrument" description="Spring 3.2.x Instrument support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/org.springframework.instrument/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-jdbc" description="Spring 3.2.x JDBC support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring-tx</feature>
        <bundle start-level="30">mvn:org.springframework/org.springframework.jdbc/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-jms" description="Spring 3.2.x JMS support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring-tx</feature>
    <bundle start-level="10">mvn:org.apache.geronimo.specs/geronimo-jta_1.1_spec/1.1.1</bundle>
        <bundle start-level="10">mvn:org.apache.geronimo.specs/geronimo-jms_1.1_spec/1.1.1</bundle>
    <bundle start-level="30">mvn:org.springframework/org.springframework.jms/3.2.4.RELEASE</bundle>
  </feature>

  <feature name="spring-struts" description="Spring 3.2.x Struts support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">
spring-web</feature>
    <feature>war</feature>
        <bundle dependency="true" start-level="30">mvn:commons-collections/commons-collections/3.2.1</bundle>
        <bundle dependency="true" start-level="30">mvn:commons-beanutils/commons-beanutils/1.9.1</bundle>
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.struts/1.3.10_1</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.web.struts/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-test" description="Spring 3.2.x Test support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/org.springframework.test/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-orm" description="Spring 3.2.x ORM support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring-jdbc</feature>
        <bundle start-level="30">mvn:org.springframework/org.springframework.orm/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-oxm" description="Spring 3.2.x OXM support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/org.springframework.oxm/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-tx" description="Spring 3.2.x Transaction (TX) support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring</feature>
        <bundle start-level="30">mvn:org.springframework/org.springframework.transaction/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-web" description="Spring 3.2.x Web support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring</feature>
        <feature version="[2,3)">http</feature>
        <bundle start-level="30">mvn:org.springframework/org.springframework.web/3.2.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.web.servlet/3.2.4.RELEASE</bundle>
    </feature>

    <feature name="spring-web-portlet" description="Spring 3.2.x Web Portlet support" version="3.2.4.RELEASE" resolver="(obr)">
        <feature version="3.2.4.RELEASE">spring-web</feature>
        <bundle dependency="true" start-level="30">mvn:javax.portlet/portlet-api/2.0</bundle>
        <bundle start-level="30">mvn:org.springframework/org.springframework.web.portlet/3.2.4.RELEASE</bundle>
    </feature>

    <!-- Spring 4.0 support -->

    <feature name="spring" description="Spring 4.0.x support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_6</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-core/4.0.2.RELEASE_1</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-expression/4.0.2.RELEASE_1</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-beans/4.0.2.RELEASE_1</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-aop/4.0.2.RELEASE_1</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-context/4.0.2.RELEASE_1</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-context-support/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-aspects" description="Spring 4.0.x AOP support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-aspects/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-instrument" description="Spring 4.0.x Instrument support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-instrument/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-jdbc" description="Spring 4.0.x JDBC support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring-tx</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-jdbc/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-jms" description="Spring 4.0.x JMS support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring-tx</feature>
        <bundle start-level="10">mvn:org.apache.geronimo.specs/geronimo-jta_1.1_spec/1.1.1</bundle>
        <bundle start-level="10">mvn:org.apache.geronimo.specs/geronimo-jms_1.1_spec/1.1.1</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-jms/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-test" description="Spring 4.0.x Test support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-test/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-orm" description="Spring 4.0.x ORM support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring-jdbc</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-orm/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-oxm" description="Spring 4.0.x OXM support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-oxm/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-tx" description="Spring 4.0.x Transaction (TX) support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-tx/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-web" description="Spring 4.0.x Web support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring</feature>
        <feature version="[2,3)">http</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-web/4.0.2.RELEASE_1</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-webmvc/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-web-portlet" description="Spring 4.0.x Web Portlet support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring-web</feature>
        <bundle dependency="true" start-level="30">mvn:javax.portlet/portlet-api/2.0</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-webmvc-portlet/4.0.2.RELEASE_1</bundle>
    </feature>

    <feature name="spring-websocket" description="Spring 4.0.x Websocket support" version="4.0.2.RELEASE_1" resolver="(obr)">
        <feature version="4.0.2.RELEASE_1">spring-web</feature>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-websocket/4.0.2.RELEASE_1</bundle>
    </feature>
            <!-- Spring Security support -->

    <feature name="spring-security" description="Spring Security 3.1.x support" version="3.1.4.RELEASE" resolver="(obr)">
        <feature>war</feature>
    <feature>spring-dm-web</feature>
    <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aspectj/1.7.4_1</bundle>
        <bundle start-level="30">mvn:org.springframework.security/spring-security-core/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework.security/spring-security-config/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework.security/spring-security-web/3.1.4.RELEASE</bundle>
        <bundle start-level="30">mvn:org.springframework.security/spring-security-acl/3.1.4.RELEASE</bundle>
    <bundle start-level="30">mvn:org.springframework.security/spring-security-taglibs/3.1.4.RELEASE</bundle>
  </feature>

<feature name="pentaho-tinkerpop-gremlin" version="2.6">
    <bundle>wrap:mvn:com.tinkerpop.gremlin/gremlin-java/2.6.0</bundle>
    <bundle>wrap:mvn:com.tinkerpop/pipes/2.6.0</bundle>
  </feature>

  <feature name="pentaho-metaverse" version="${project.version}">
    <details>Provides data lineage capabilities</details>
    <configfile finalname="/etc/pentaho.metaverse.cfg">
      mvn:pentaho/pentaho-osgi-config/${project.version}/cfg/pentaho-metaverse
    </configfile>

    <feature>pentaho-client</feature>
    <feature>pentaho-tinkerpop-gremlin</feature>
    <feature>http</feature>
    <feature>http-whiteboard</feature>
    <feature>cxf</feature>

    <bundle>wrap:mvn:net.sf.flexjson/flexjson/2.1</bundle>
    <bundle>mvn:com.google.guava/guava/17.0</bundle>
    <bundle>mvn:com.fasterxml.jackson.core/jackson-databind/2.3.3</bundle>
    <bundle>mvn:com.fasterxml.jackson.core/jackson-annotations/2.3.3</bundle>
    <bundle>mvn:com.fasterxml.jackson.core/jackson-core/2.3.3</bundle>

    <bundle>mvn:org.codehaus.jackson/jackson-core-asl/1.9.13</bundle>
    <bundle>mvn:org.codehaus.jackson/jackson-mapper-asl/1.9.13</bundle>
    <bundle>mvn:org.codehaus.jackson/jackson-jaxrs/1.9.13</bundle>
    <bundle>mvn:commons-collections/commons-collections/3.2.1</bundle>

    <bundle>mvn:pentaho/pentaho-metaverse-core/${project.version}</bundle>
  </feature>

</features>
